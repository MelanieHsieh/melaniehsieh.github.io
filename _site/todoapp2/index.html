<!DOCTYPE html> <html> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Project Minimal" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Project Minimal" /> <title> Week 2 Todo App - Project Minimal </title> <link rel="alternate" href="http://localhost:4000/todoapp2/" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/todoapp2/" /> <meta name="description" content="" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Week 2 Todo App | " /> <meta property="og:title" content="Week 2 Todo App | " /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/todoapp2/" /> <meta property="og:description" content="" /> <meta property="og:image" content="http://localhost:4000/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Week 2 Todo App | " /> <meta name="twitter:url" content="http://localhost:4000/todoapp2/" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:description" content="" /> <meta name="twitter:image" content="http://localhost:4000/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Project Minimal" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="dark"> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"> <a class="menu-link" href="/">home</a> <a class="menu-link" href="/about/">about</a> <a class="menu-link" href="/blog/">blog</a> <a class="menu-link" href="/series/">series</a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/series/#code">CODE</a> </span> </div> <h1 class="header-title" itemprop="headline">Week 2 Todo App</h1> <div class="post-meta"> <time datetime="2020-04-03T12:00:04+00:00" itemprop="datePublished"> Apr 03, 2020 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Melanie Hsieh</span> </span> <time hidden datetime="" itemprop="dateModified"> Apr 03, 2020 </time> <span hidden itemprop="publisher" itemtype="Person">Melanie Hsieh</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>From last week’s blog, we introduced the front end design of the app. This week we will be going through the back end of the app.</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>From last week’s blog, we introduced the front end design of the app. This week we will be going through the back end of the app.</p> <h1 id="part-1-back-end"> <a href="#part-1-back-end" class="anchor-head"></a> Part 1: Back End </h1> <p>As mentioned from last week’s blog, front end is basically the user side. What the user sees and interact. The back end is the opposite, it is the the database side. It stores all the user’s data, the user won’t see it which is why it’s called <strong>back</strong> end.</p> <h1 id="part-2-installations"> <a href="#part-2-installations" class="anchor-head"></a> Part 2: Installations </h1> <h2 id="tools"> <a href="#tools" class="anchor-head"></a> Tools </h2> <ul> <li>MongoDB (This is a free database I am using)</li> <li>Mongoose (MongoDB framework)</li> <li>Express (Node framework)</li> <li>Node (Node links the database with your app)</li> <li>Nodemon (Node framework that auto updates the terminal once you saved your code)</li> </ul> <p><code class="language-plaintext highlighter-rouge">npm i mongoose nodemon express axios --save</code></p> <h1 id="part-3-setting-up"> <a href="#part-3-setting-up" class="anchor-head"></a> Part 3: Setting Up </h1> <p>Create a new folder in the same todo app project as last week’s.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">mkdir</span> <span class="nx">backend</span>
<span class="nx">cd</span> <span class="nx">backend</span>
</code></pre></div></div> <p>Then call git init and install all the dependencies.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">git</span> <span class="nx">init</span>
<span class="nx">npm</span> <span class="nx">i</span> <span class="nx">mongoose</span> <span class="nx">nodemon</span> <span class="nx">express</span> <span class="nx">axios</span> <span class="o">--</span><span class="nx">save</span>
</code></pre></div></div> <p>Create a new file called <code class="language-plaintext highlighter-rouge">server.js</code>. Create a port that will host your server. You can type in any number but I usually use port 5000.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">5000</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Server connected to: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">port</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div> <p>To test run, simply type <code class="language-plaintext highlighter-rouge">nodemon server</code> to your terminal</p> <p><img src="/img/todo/localhost.png" alt="localhost" width="500" /></p> <p>Replace the <code class="language-plaintext highlighter-rouge">&lt;mongodb_url&gt;</code> with your url, you can find it in the connect section once you created your cluster. This will connect your MongoDB to the app. <em>Quick tip: Use the free cluster when you are starting a new project in MongoDB</em></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">mongodb_url</span><span class="o">&gt;</span>
<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span>
<span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="na">useCreateIndex</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="na">useUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">;</span>
<span class="nx">connection</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="dl">"</span><span class="s2">open</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Connected to MongoDB</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div></div> <p><img src="/img/todo/mongo.png" alt="mongo" width="500" /></p> <h2 id="model"> <a href="#model" class="anchor-head"></a> Model </h2> <p>After setting up the server, we will create a <strong>Model</strong>. It will create objects to be declared, so basically columns that is used to locate and store the data.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">TodoSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="na">required</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="na">description</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="na">required</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="na">status</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span> <span class="na">required</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="na">date</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nb">Date</span><span class="p">,</span> <span class="na">required</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">timestamps</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div> <h2 id="router"> <a href="#router" class="anchor-head"></a> Router </h2> <h3 id="get-request"> <a href="#get-request" class="anchor-head"></a> Get Request </h3> <p>This will get all the available data that is saved into the database.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">).</span><span class="kd">get</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">Todo</span><span class="p">.</span><span class="nx">find</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">todos</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">todos</span><span class="p">))</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="dl">"</span><span class="s2">Errors: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">err</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div></div> <h3 id="post-request"> <a href="#post-request" class="anchor-head"></a> Post Request </h3> <p>This will send data to MongoDB once it is called. It will create a new todo row for the <code class="language-plaintext highlighter-rouge">newTodo</code>.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">).</span><span class="nx">post</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">description</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">description</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">date</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">date</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">newTodo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Todo</span><span class="p">({</span>
    <span class="nx">title</span><span class="p">,</span>
    <span class="nx">description</span><span class="p">,</span>
    <span class="nx">status</span><span class="p">,</span>
    <span class="nx">date</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="nx">newTodo</span>
    <span class="p">.</span><span class="nx">save</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="dl">"</span><span class="s2">Todo added!</span><span class="dl">"</span><span class="p">))</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="dl">"</span><span class="s2">Errors: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">err</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div></div> <h2 id="testing"> <a href="#testing" class="anchor-head"></a> Testing </h2> <p>Testing is a very important step, as it determines whether your backend server and the MongoDB work. You need to install <strong>Postman</strong> in google web store. It is an extension. Then paste in your localhost (remember to add the url in your router behind the localhost).</p> <p>Here is an example <code class="language-plaintext highlighter-rouge">http://localhost:5000/todos/</code>.</p> <p><img src="/img/todo/postman.png" alt="localhost" width="800" /></p> <p>Then click the <strong>POST</strong> button on the left and enter value in <strong>body</strong>. When you press submit, it should say <code class="language-plaintext highlighter-rouge">Todo Added</code>.</p> <p>If you change the button to <strong>GET</strong> on the left hand side menu. When you press submit, it should say list out the todo you added before hand. In my case it would be ‘Clean Room’.</p> <p>Your Backend is Working.🎉🎉🎉</p> <h1 id="end"> <a href="#end" class="anchor-head"></a> END </h1> <p>This blog gave you a simple tutorial on adding your backend to the existing Todo App. Next week we will look at how to connect frontend to backend.</p> <p>I have put the full source code for this week’s tutorial on <strong><a href="https://github.com/melaniehsieh/subtle">Github</a></strong>. Good Luck!</p> <p>Thanks for reading 👀. There will be a weekly blog every Friday, Stay Tuned.😉</p> </div> </article> <!-- unnecessary file, but you can still use for comment section, e.g disqus --> <script src="https://utteranc.es/client.js" repo="username/reponame" issue-term="pathname" label="✨ comment ✨" theme="github-light" crossorigin="anonymous" async ></script> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/todoapp/" > <div class="nav-arrow">Previous</div> <span class="post-title">Week 1 Todo App</span> </a> <a class="post-nav-item post-nav-next" href="/debug/"> <div class="nav-arrow">Next</div> <span class="post-title">Debugging</span> </a> </nav> <footer class="footer"> <small class="footer_theme-copyright"> <a href="https://github.com/melaniehsieh" target="_blank" rel="noreferrer noopener" >melaniehsieh</a > © 2020 </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> <script src="/assets/js/galite.js"></script> <script> var galite = galite || {}; galite.UA = "UA-164930515-1"; </script> </div> </body> </html>
